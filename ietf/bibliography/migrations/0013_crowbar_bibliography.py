# -*- coding: utf-8 -*-
# Generated by Django 1.11.25 on 2020-03-31 19:54
from __future__ import unicode_literals

from django.db import migrations

dt_rfc_pks = {
     '3935': 3147,
     '3933': 3137,
     '3683': 2852,
     '8366': 9397,
     '2438': 1181,
     '5377': 3839,
     '8174': 8759,
     '3710': 2740,
     '7418': 3,
     '3692': 2270,
     '5234': 4183,
     '7129': 7111,
     '8224': 8906,
     '8555': 9554,
     '7450': 2153,
     '4371': 3635,
     '7127': 7282,
     '2850': 1649,
     '4879': 4026,
     '6840': 3542,
     '2181': 730,
     '3967': 3034,
     '7049': 7253,
     '2914': 1695,
     '6771': 4995,
     '5434': 3703,
     '3596': 2648,
     '8484': 9498,
     '5155': 3437,
     '4033': 2271,
     '8499': 9526,
     '3233': 1639,
     '6220': 2748,
     '5743': 3828,
     '6733': 4083,
     '5485': 4361,
     '4858': 3277,
     '4343': 2771,
     '1034': 6521,
     '1035': 9206,
     '2131': 494,
     '8415': 9514,
     '7120': 7198,
     '4474': 2718,
     '5111': 4240,
     '4633': 3771,
     '5657': 4513,
     '2360': 838,
     '4691': 3690,
     '4181': 2777,
     '6087': 4748,
     '5706': 4278,
     '5406': 2698,
     '3552': 2619,
     '5226': 3286,
     '8126': 8371,
     '3470': 2509,
     '4897': 3850,
     '7221': 7175,
     '8719': 9731,
     '4052': 3070,
     '8318': 8892,
     '7437': 7405,
     '2780': 1615,
     '5237': 4301,
     '5742': 4512,
     '7776': 8464,
     '3005': 1543,
     '7154': 7287,
     '3677': 2769,
     '8718': 9730,
     '2277': 1072,
     '3978': 3249,
     '2418': 985,
     '2031': 696,
     '8474': 9482,
     '2663': 1346,
     '6576': 5073,
     '3849': 2790,
     '2014': 799,
     '6740': 5512,
     '7942': 8739,
     '7475': 7411,
     '4846': 4157,
     '8179': 8365,
     '3979': 6976,
     '4443': 1592,
     '5322': 3935,
     '8200': 8818,
     '2812': 1577,
     '4949': 3302,
     '1983': 731,
     '8576': 9587,
     '1311': 130,
     '2119': 835,
     '8520': 9558,
     '2860': 1815,
     '8342': 9366,
     '3260': 1662,
     '7282': 7149,
     '6748': 5515,
     '8225': 8911,
     '4821': 3040,
     '8201': 8832,
     '8588': 9606,
     '3454': 2332,
     '7500': 7416,
     '6973': 5448,
     '4053': 3134,
     '4775': 3927,
     '5745': 4901,
     '5744': 4849,
     '4845': 4097,
     '6702': 5381,
     '4035': 2706,
     '3797': 2272,
     '6722': 7070,
     '4748': 3966,
     '4841': 4104,
     '6635': 5272,
     '5741': 4479,
     '7322': 7380,
     '2309': 997,
     '6410': 5051,
     '2865': 1509,
     '1122': 8204,
     '2606': 1087,
     '5378': 4149,
     '3261': 1889,
     '6701': 5523,
     '8226': 8907,
     '1982': 722,
     '3330': 2466,
     '7858': 8675,
     '4071': 3387,
     '5681': 3774,
     '6365': 5327,
     '7228': 7206,
     '4084': 3176,
     '4333': 3450,
     '3688': 2036,
     '2026': 629,
     '7649': 7531,
     '2028': 666,
     '4844': 3893,
     '8446': 9450,
     '7170': 5332,
     '3629': 2515,
     '5704': 4776,
     '3934': 3140,
     '8067': 8758,
     '7691': 7540,
     '5218': 4310,
     '2629': 1478,
     '8519': 9557
}

dt_charter_title_pks = {'Automated Certificate Management Environment': 734,
    'DNS Over HTTPS': 770,
    'DNS PRIVate Exchange': 708,
    'Dispatch': 601,
    'Domain Name System Operations': 349,
    'Domain-based Message Authentication, Reporting & Conformance': 672,
    'Email mailstore and eXtensions To Revise or Amend': 767,
    'IETF Administrative Support Activity 2': 779,
    'IPv6 Maintenance': 573,
    'IPv6 Operations': 463,
    'IPv6 over Low power WPAN': 517,
    'IPv6 over networks of resource-constrained nodes': 687,
    'IPv6 over the TSCH mode of IEEE 802.15.4e': 688,
    'Internet Area Working Group': 540,
    'JSON Mail Access Protocol': 764,
    'Link State Vector Routing': 777,
    'QUIC': 758,
    'Routing In Fat Trees': 775,
    'Security Dispatch': 778,
    'Transport Area Working Group': 360,
}

def forward(apps, schema_editor):
    BibliographyItem = apps.get_model('bibliography','BibliographyItem')

    for item in BibliographyItem.objects.filter(content_key='rfc'):
        rfc_number = item.content_title[4:8]
        item.content_identifier = dt_rfc_pks[rfc_number]
        item.object_id = dt_rfc_pks[rfc_number]
        item.save()

    for item in BibliographyItem.objects.filter(content_key='charter'):
        title = item.content_title
        item.content_identifier = dt_charter_title_pks[title]
        item.object_id = dt_charter_title_pks[title]
        item.save()


def reverse(apps, schema_editor):
    """
        The state of the BibliographyItem objects was confused enough that trying to return to it is not useful.
    """
    pass

class Migration(migrations.Migration):

    dependencies = [
        ('bibliography', '0012_use_snippets_objects_instead_of_dt_objects'),
        ('snippets', '0043_restore_dt_pks_charters'),
    ]

    operations = [
        migrations.RunPython(forward,reverse)
    ]